"use strict";(()=>{(function(){"use strict";let{nodecg:i}=globalThis,t=Date.now(),{pathname:o}=globalThis.location;o.endsWith(`/${i.bundleName}/graphics/`)&&(o+="index.html"),globalThis.socket.on("graphic:kill",e=>{e&&e.socketId===globalThis.socket.id&&(globalThis.location.href="/instance/killed.html?pathname="+o)}),globalThis.socket.on("graphic:refresh",e=>{e&&e.socketId===globalThis.socket.id&&globalThis.location.reload()}),globalThis.socket.on("graphic:refreshAll",e=>{e&&e.url===o&&globalThis.location.reload()}),globalThis.socket.on("graphic:bundleRefresh",e=>{e&&e===i.bundleName&&globalThis.location.reload()}),l(),globalThis.socket.io.on("reconnect",()=>{l()});function l(){globalThis.socket.emit("graphic:registerSocket",{timestamp:t,pathName:o,bundleName:i.bundleName,bundleVersion:i.bundleVersion,bundleGit:i.bundleGit},(e,n)=>{n?(window.dispatchEvent(new CustomEvent("nodecg-registration-accepted")),window.__nodecgRegistrationAccepted__=!0):globalThis.location.href="/instance/busy.html?pathname="+o})}})();})();
//# sourceMappingURL=client_registration.js.map
